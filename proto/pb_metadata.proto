syntax = "proto3";

package pb_metadata;



// -------------- State Machine  ---------------

// =============================================

message UnitMeta {
  bool bootstrap_partition = 1;
}

message UnitInfo {
  uint64 id = 1;
  string advertise_address = 2;
}

message Unit {

}

message MailPostChunk {
  uint64 partition_id = 1;
  repeated bytes payloads = 2;
}

message MailPostSummary {

}

message SnapshotData {
  uint64 id = 1;
  uint64 from = 2;
}

message SnapshotRequest {
  string path = 1;
}

message SnapshotChunk {

}


service Metadata {

  rpc mail_post(stream MailPostChunk) returns(MailPostSummary);

  rpc load_snapshot(SnapshotRequest) returns (stream SnapshotChunk);
}